# KKClinic - à¸£à¸°à¸šà¸šà¸šà¸£à¸´à¸«à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸„à¸¥à¸´à¸™à¸´à¸

![Next.js](https://img.shields.io/badge/Next.js-16-black?logo=next.js)
![React](https://img.shields.io/badge/React-19-61DAFB?logo=react)
![Supabase](https://img.shields.io/badge/Supabase-Postgres-3FCF8E?logo=supabase)
![TailwindCSS](https://img.shields.io/badge/Tailwind-4-06B6D4?logo=tailwindcss)
![TypeScript](https://img.shields.io/badge/TypeScript-5-3178C6?logo=typescript)
![License](https://img.shields.io/badge/License-Private-red)

> Web Application à¸ªà¸³à¸«à¸£à¸±à¸šà¸šà¸£à¸´à¸«à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸„à¸¥à¸´à¸™à¸´à¸à¸•à¸² à¸„à¸£à¸­à¸šà¸„à¸¥à¸¸à¸¡à¸à¸²à¸£à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢ à¸à¸²à¸£à¸ªà¸±à¹ˆà¸‡à¸¢à¸² à¸à¸²à¸£à¸ˆà¹ˆà¸²à¸¢à¸¢à¸²à¹à¸¥à¸°à¸„à¸´à¸”à¹€à¸‡à¸´à¸™ à¹à¸¥à¸°à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸„à¸¥à¸±à¸‡à¸¢à¸²

## ğŸ¥ Features

### Core
- **à¸£à¸°à¸šà¸šà¸¢à¸·à¸™à¸¢à¸±à¸™à¸•à¸±à¸§à¸•à¸™** - Login/Logout à¸à¸£à¹‰à¸­à¸¡ Role-based Access (Admin, Doctor, Staff)
- **à¸ˆà¸±à¸”à¸à¸²à¸£à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢** - à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™, à¸„à¹‰à¸™à¸«à¸², à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢, à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¹à¸à¹‰à¸¢à¸²
- **à¸ªà¸±à¹ˆà¸‡à¸¢à¸²/à¸«à¸±à¸•à¸–à¸à¸²à¸£** - à¹à¸à¸—à¸¢à¹Œà¸ªà¸£à¹‰à¸²à¸‡à¹ƒà¸šà¸ªà¸±à¹ˆà¸‡à¸¢à¸²à¸à¸£à¹‰à¸­à¸¡ Autocomplete
- **à¸ˆà¹ˆà¸²à¸¢à¸¢à¸² & à¸„à¸´à¸”à¹€à¸‡à¸´à¸™** - à¸à¸™à¸±à¸à¸‡à¸²à¸™à¸ˆà¹ˆà¸²à¸¢à¸¢à¸²à¸•à¸²à¸¡à¹ƒà¸šà¸ªà¸±à¹ˆà¸‡, à¸­à¸­à¸à¹ƒà¸šà¹€à¸ªà¸£à¹‡à¸ˆ
- **à¸ˆà¸±à¸”à¸à¸²à¸£à¸ªà¸•à¹Šà¸­à¸** - à¹€à¸à¸´à¹ˆà¸¡/à¸¥à¸”à¸ªà¸•à¹Šà¸­à¸, à¸”à¸¹à¸›à¸£à¸°à¸§à¸±à¸•à¸´

### Sprint 3 Features (Latest)
- **Smart Dosage System** - Tokenizer + Dictionary + Translation Engine
- **Doctor Fee (DF)** - à¸„à¹ˆà¸²à¸˜à¸£à¸£à¸¡à¹€à¸™à¸µà¸¢à¸¡à¹à¸à¸—à¸¢à¹Œ à¸à¸£à¹‰à¸­à¸¡ Note Presets
- **Medicine Summary Sheet** - à¹ƒà¸šà¸ªà¸£à¸¸à¸›à¸£à¸²à¸¢à¸à¸²à¸£à¸¢à¸² (Internal Use)
- **Bilingual Labels** - à¸‰à¸¥à¸²à¸à¸¢à¸² 2 à¸ à¸²à¸©à¸² (Thai/English)
- **TN Format** - à¸£à¸«à¸±à¸ªà¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢à¹à¸šà¸šà¹ƒà¸«à¸¡à¹ˆ (TN250429)

## ğŸ›  Tech Stack

| Technology | Version | Purpose |
|------------|---------|---------|
| [Next.js](https://nextjs.org/) | 16.1.3 | React Framework (App Router) |
| [React](https://react.dev/) | 19.2.3 | UI Library |
| [TypeScript](https://www.typescriptlang.org/) | 5 | Type Safety |
| [Tailwind CSS](https://tailwindcss.com/) | 4 | Styling |
| [shadcn/ui](https://ui.shadcn.com/) | - | UI Components |
| [Supabase](https://supabase.com/) | 2.90 | Backend (PostgreSQL + Auth) |
| [Zod](https://zod.dev/) | 4.3 | Schema Validation |
| [Vercel](https://vercel.com/) | - | Deployment |

## ğŸ“‹ Prerequisites

- Node.js 20+ 
- npm or pnpm
- Supabase Account

## ğŸš€ Getting Started

### 1. Clone Repository

```bash
git clone https://github.com/cloudstellar/kkclinic.git
cd kkclinic
```

### 2. Install Dependencies

```bash
npm install
```

### 3. Setup Environment Variables

```bash
cp .env.example .env.local
```

à¹à¸à¹‰à¹„à¸‚ `.env.local`:

```env
NEXT_PUBLIC_SUPABASE_URL=https://xlgztefpllpurbowibvz.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here
```

> ğŸ’¡ à¸ªà¸²à¸¡à¸²à¸£à¸–à¸«à¸² Supabase keys à¹„à¸”à¹‰à¸—à¸µà¹ˆ [Supabase Dashboard](https://supabase.com/dashboard/project/xlgztefpllpurbowibvz/settings/api)

### 4. Run Development Server

```bash
npm run dev
```

à¹€à¸›à¸´à¸” [http://localhost:3000](http://localhost:3000) à¹ƒà¸™à¹€à¸šà¸£à¸²à¸§à¹Œà¹€à¸‹à¸­à¸£à¹Œ

## ğŸ‘¤ Demo Accounts

| Role | Email | Password |
|------|-------|----------|
| Admin | admin@kkclinic.com | Admin123! |
| Doctor | doctor@kkclinic.com | Doctor123! |
| Staff | staff@kkclinic.com | Staff123! |

## ğŸ“ Project Structure

```
kkclinic/
â”œâ”€â”€ docs/                    # Documentation
â”‚   â”œâ”€â”€ 01-constitution/     # Core rules (RULES, TECH_STACK, LESSONS_LEARNED)
â”‚   â”œâ”€â”€ 02-architecture/     # ADR, WORKFLOW, DATABASE
â”‚   â”œâ”€â”€ 04-features/         # Sprint-specific docs
â”‚   â””â”€â”€ 05-reference/        # ROADMAP, GLOSSARY
â”œâ”€â”€ supabase/                # Database migrations
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                 # Next.js pages (App Router)
â”‚   â”‚   â”œâ”€â”€ (auth)/          # Public routes (login)
â”‚   â”‚   â””â”€â”€ (dashboard)/     # Protected routes
â”‚   â”œâ”€â”€ components/          # React components
â”‚   â”‚   â”œâ”€â”€ ui/              # shadcn/ui components
â”‚   â”‚   â”œâ”€â”€ layout/          # Layout components
â”‚   â”‚   â”œâ”€â”€ forms/           # Form components
â”‚   â”‚   â”œâ”€â”€ prescription/    # Prescription-specific (Dosage Sheet, Summary)
â”‚   â”‚   â””â”€â”€ payment/         # Payment modal, etc.
â”‚   â”œâ”€â”€ lib/                 # Utilities
â”‚   â”‚   â”œâ”€â”€ supabase/        # Supabase clients
â”‚   â”‚   â””â”€â”€ dosage/          # Smart Dosage Engine (Tokenizer, Dictionary)
â”‚   â”œâ”€â”€ hooks/               # Custom React hooks
â”‚   â””â”€â”€ types/               # TypeScript definitions
â””â”€â”€ public/                  # Static assets
```

## ğŸ” Role Permissions

| Feature | Admin | Doctor | Staff |
|---------|:-----:|:------:|:-----:|
| à¸ˆà¸±à¸”à¸à¸²à¸£à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰ | âœ… | âŒ | âŒ |
| à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢ | âœ… | âŒ | âœ… |
| à¸„à¹‰à¸™à¸«à¸²à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢ | âœ… | âœ… | âœ… |
| à¸ªà¸±à¹ˆà¸‡à¸¢à¸² | âœ… | âœ… | âŒ |
| à¸ˆà¹ˆà¸²à¸¢à¸¢à¸² & à¸„à¸´à¸”à¹€à¸‡à¸´à¸™ | âœ… | âŒ | âœ… |
| à¸ˆà¸±à¸”à¸à¸²à¸£à¸ªà¸•à¹Šà¸­à¸ | âœ… | âŒ | ğŸŸ¡* |
| à¸”à¸¹à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸ªà¸•à¹Šà¸­à¸ | âœ… | âŒ | âœ… |

*ğŸŸ¡ Staff à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸à¸´à¹ˆà¸¡à¸ªà¸•à¹Šà¸­à¸à¹„à¸”à¹‰ à¹à¸•à¹ˆà¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¥à¸š/à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¢à¸²

## ğŸ—„ Database Schema

**Tables:**
- `users` - à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸£à¸°à¸šà¸š
- `patients` - à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢ (TN, name, drug_allergies, etc.)
- `medicines` - à¸£à¸²à¸¢à¸à¸²à¸£à¸¢à¸²/à¹€à¸§à¸Šà¸ à¸±à¸“à¸‘à¹Œ
- `prescriptions` - à¹ƒà¸šà¸ªà¸±à¹ˆà¸‡à¸¢à¸² (df, df_note, total_price)
- `prescription_items` - à¸£à¸²à¸¢à¸à¸²à¸£à¸¢à¸² (dosage_original, dosage_instruction, etc.)
- `transactions` - à¸˜à¸¸à¸£à¸à¸£à¸£à¸¡à¸à¸²à¸£à¸„à¸´à¸”à¹€à¸‡à¸´à¸™
- `stock_logs` - à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¹€à¸„à¸¥à¸·à¹ˆà¸­à¸™à¹„à¸«à¸§à¸ªà¸•à¹Šà¸­à¸

## ğŸ“ Available Scripts

```bash
# Development
npm run dev           # Start dev server
npm run build         # Build for production
npm run start         # Start production server
npm run lint          # Run ESLint (MUST pass before commit)
npm run test          # Run Vitest tests

# Database
npm run db:types      # Generate TypeScript types from Supabase
```

## ğŸš¢ Deployment

### Deploy to Vercel

1. Push code to GitHub
2. Connect repository to Vercel
3. Add environment variables:
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
4. Deploy!

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new)

## ğŸ“… Roadmap

### âœ… Sprint 1-2: Foundation & Billing
- Auth, Patients, Inventory, Prescriptions
- Billing, Payment Modal, Void Transactions

### âœ… Sprint 3A-C: UX & Smart Features
- TN Format, Drug Allergies Warning
- Smart Dosage System (Tokenizer + Dictionary + Engine)
- Doctor Fee (DF) with Note Presets
- Medicine Summary Sheet (Internal)
- Bilingual Labels

### ğŸ”² Sprint 4: Workflow Revolution (Next)
- Real-time filter & Sortable tables
- Reserved Stock Model
- Patient Statement (à¹ƒà¸šà¸ªà¸£à¸¸à¸›à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢)
- End of Day (EOD) workflow

### ğŸ”² Future
- Barcode Scanner
- PDF Export
- LOT/Expiry tracking
- Optical orders (à¹à¸§à¹ˆà¸™/à¸„à¸­à¸™à¹à¸—à¸„)
- Insurance billing

---

**Current Version:** `v0.6.0-sprint3-complete`

Built with â¤ï¸ using [Next.js](https://nextjs.org/) and [Supabase](https://supabase.com/)
