# Antigravity AI Rules

> ‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö Antigravity AI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö KKClinic

---

## üéØ Core Principle: Plan First

**‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏á‡∏°‡∏∑‡∏≠‡πÇ‡∏Ñ‡πâ‡∏î Antigravity ‡∏ï‡πâ‡∏≠‡∏á‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏™‡∏°‡∏≠**

---

## üõë 0. Golden Rule: User Confirmation (‡∏Å‡∏é‡πÄ‡∏´‡∏•‡πá‡∏Å)

**"Never Start Without Approval"**

1.  **Stop**: ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà, ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Milestone, ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡πâ‡∏≤‡∏° Task boundary
2.  **Ask**: ‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡∏≤‡∏° User ‡πÄ‡∏™‡∏°‡∏≠‡∏ß‡πà‡∏≤ "‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥ [Task X] ‡πÄ‡∏•‡∏¢‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö?"
3.  **Wait**: ‡∏´‡πâ‡∏≤‡∏° assume ‡∏´‡∏£‡∏∑‡∏≠ auto-proceed (‡πÅ‡∏°‡πâ‡∏ß‡πà‡∏≤‡πÅ‡∏ú‡∏ô‡∏à‡∏∞‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡∏ï‡∏≤‡∏°) ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠ User ‡∏û‡∏¥‡∏°‡∏û‡πå "Start", "Ok", "‡∏•‡∏∏‡∏¢" ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

## üß± 0.1 Tech Stack Compliance

1.  **Strict Adherence**: All code must comply with `docs/01-constitution/TECH_STACK.md`.
2.  **Precedence**: If a conflict exists between a Feature Spec and the Tech Stack, **TECH_STACK.md takes precedence**.

## üíÄ 0.2 Lessons Learned Compliance

1.  **Non-Negotiable**: `docs/01-constitution/LESSONS_LEARNED.md` defines non-negotiable constraints derived from past failures.
2.  **Zero Violation**: Violations of these rules are **NOT ALLOWED** under any circumstances.

---

## üìã Mandatory Steps (‡∏ó‡∏≥‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á)

### 1. Context Summary
- ‡∏≠‡πà‡∏≤‡∏ô `docs/05-reference/ROADMAP.md` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
- ‡∏≠‡πà‡∏≤‡∏ô `docs/HANDOFF_PROMPT.md` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö context ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö ADR ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡πÉ‡∏ô `docs/02-architecture/ADR/`

### 2. Definition of Ready (DoR)
‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ:
- [ ] Sprint/Issue ID
- [ ] Decision Lock (‡∏ó‡∏≥/‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£)
- [ ] Acceptance Criteria (testable)
- [ ] File/Component plan
- [ ] Risk/Edge cases (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏Ç‡πâ‡∏≠)
- [ ] Verification plan

### 3. Documentation Updates
- ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï `docs/05-reference/ROADMAP.md` (status, decision lock)
- ‡∏™‡∏£‡πâ‡∏≤‡∏á ADR ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ design decision ‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô `docs/02-architecture/ADR/`
- ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï `docs/HANDOFF_PROMPT.md` ‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡∏á‡∏≤‡∏ô

### 4. Commit Properly
- ‡πÉ‡∏ä‡πâ conventional commits
- Tag ‡∏ï‡∏≤‡∏° sprint convention
- Push ‡∏û‡∏£‡πâ‡∏≠‡∏° tags

---

## üîÑ Workflow Mode

```
PLANNING ‚Üí EXECUTION ‚Üí VERIFICATION
```

### PLANNING Mode
- ‡∏ß‡∏¥‡∏à‡∏±‡∏¢ codebase
- ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö solution
- ‡∏™‡∏£‡πâ‡∏≤‡∏á implementation_plan.md
- ‡∏£‡∏≠ user approve ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡πâ‡∏î

### EXECUTION Mode
- ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏ï‡∏≤‡∏° plan
- ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ PLANNING ‡∏ñ‡πâ‡∏≤‡∏û‡∏ö complexity ‡πÉ‡∏´‡∏°‡πà

### VERIFICATION Mode
- Test ‡∏ï‡∏≤‡∏° verification plan
- ‡∏™‡∏£‡πâ‡∏≤‡∏á walkthrough.md
- Commit ‡πÅ‡∏•‡∏∞ tag

---

## üìù ADR Template

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ design decision ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡∏™‡∏£‡πâ‡∏≤‡∏á ADR ‡πÉ‡∏ô `docs/ADR/`:

```markdown
# ADR-XXXX: [Title]

> **Status:** Proposed | Accepted | Deprecated
> **Date:** YYYY-MM-DD
> **Sprint:** [Sprint ID]

## Context
[‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£]

## Decision
[‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ó‡∏≥]

## Options Considered
### Option A (‚ùå Rejected)
### Option B (‚úÖ Selected)

## Consequences
### Positive
### Negative
### Technical
```

---

## ‚ö†Ô∏è Don'ts

- ‚ùå ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡πâ‡∏î‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ DoR
- ‚ùå ‡∏≠‡∏¢‡πà‡∏≤ assume ‡∏ß‡πà‡∏≤ codebase ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏™‡∏°‡∏≠
- ‚ùå ‡∏≠‡∏¢‡πà‡∏≤‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏≤‡∏£ test ‡∏Å‡πà‡∏≠‡∏ô commit
- ‚ùå ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏° tag
- ‚ùå ‡∏≠‡∏¢‡πà‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á decision ‡πÉ‡∏´‡∏°‡πà‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ADR
- ‚ùå **Schema Change = Type Check** ‡∏≠‡∏¢‡πà‡∏≤‡πÅ‡∏Å‡πâ DB schema ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà grep ‡∏´‡∏≤ type usage ‡∏ó‡∏±‡πâ‡∏á repo (Sprint 3C lesson)

---

## üöÄ Quick Start Prompt

‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å prompt ‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà:

```
‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡πâ‡∏î:
1. ‡∏≠‡πà‡∏≤‡∏ô docs/ROADMAP.md ‡πÅ‡∏•‡∏∞ docs/HANDOFF_PROMPT.md
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á implementation plan ‡∏û‡∏£‡πâ‡∏≠‡∏° DoR checklist
3. ‡∏£‡∏≠ approve ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡πâ‡∏î
4. ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ design decision ‡πÉ‡∏´‡∏°‡πà ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á ADR
5. ‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à ‚Üí ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ + tag
```

---

## üìö Related

- [ROADMAP.md](../05-reference/ROADMAP.md)
- [WORKFLOW.md](../02-architecture/WORKFLOW.md)
- [ADR/](../02-architecture/ADR/)
